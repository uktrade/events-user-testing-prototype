
<!--  MACRO TO MAKE EACH LIVE LINE ITEM -->
{% macro trackingLinks(number) %}
<tr>
  <td style="font-weight:700; width:30%; padding-top:25px; padding-bottom:20px;";>{{ session.eventsLiveURLS[session.currentEventShowing][0][number] }}</td>
  <td style="padding-top:25px; padding-bottom:20px;">{{ session.eventsLiveURLS[session.currentEventShowing][1][number] }}</td>
  <td style="padding-top:15px; padding-bottom:15px;" >
    <div>
      <input style="float:right;" type="submit" class="button-secondary" formaction="/create-event/go-live" value="Copy to clipboard">
    </div>
  </td>
</tr>
{% endmacro %}



<table style="width:100%;">


  {% if 1 < session.eventsLiveURLS[session.currentEventShowing][0].length  %}
    {{ trackingLinks(1) }}
  {% endif %}


  {% if 2 < session.eventsLiveURLS[session.currentEventShowing][0].length %}
    {{ trackingLinks(2) }}
  {% endif %}


  {% if 3 < session.eventsLiveURLS[session.currentEventShowing][0].length %}
    {{ trackingLinks(3) }}
  {% endif %}


  {% if 4 < session.eventsLiveURLS[session.currentEventShowing][0].length %}
    {{ trackingLinks(4) }}
  {% endif %}


  {% if 5 < session.eventsLiveURLS[session.currentEventShowing][0].length  %}
    {{ trackingLinks(5) }}
  {% endif %}


  {% if 6 < session.eventsLiveURLS[session.currentEventShowing][0].length  %}
    {{ trackingLinks(6) }}
  {% endif %}



  <!-- Add new  tracking link -->
  <tr>
    <td style="font-weight:700; width:30%; padding-top:25px; padding-bottom:20px;";>

      {% if errorTrackingName %}
      <p class="error-message">
        Enter tracking name
      </p>
      {% endif %}

      <input type="text" class="form-control  {% if errorTrackingName %} form-control-error {% endif %}"
             id="new-link-name" name="new-link-name" value="" style="width:80%">
    </td>

    <td style="padding-top:16px; padding-bottom:20px;">
      {% if errorTrackingName %}
        <div style=" margin-top: 20px; margin-bottom: 0px;">
      {% else %}
        <div>
      {% endif %}


          <textarea type="text" class="form-control" id="new-url" name="new-url" rows="2" style="width: 90%; display:none; margin-top:11px; margin-bottom:5px;">{{session.eventsLiveURLS[session.currentEventShowing][1][0]}}</textarea>

          <p class="button-secondary" onclick="makeLink()" id="link-generator" style="margin-top:22px">Generate link</p>

      {% if errorTrackingName %}
        </div>
      {% else %}
        </div>
      {% endif %}

    </td>

    <td style="padding-top:15px; padding-bottom:15px;" >
      <input type="submit" class="button" formaction="/add-tracking-link-go-live" value="Save">
    </td>
  </tr>

</table>


<script>

  function makeLink()
  {
    var urlOfName = document.getElementById('new-link-name').value;

    // Make lower case
    urlOfName = urlOfName.toLowerCase();

    // remove space an then hyphens
    urlOfName = urlOfName.replace(" - ", " ");

    // remove spaces
    urlOfName = urlOfName.replace(/\s/g, '-');

    // remove ampersand
    urlOfName = urlOfName.replace(/&/g, "");

    // aDD TO THE LINK BOX
    document.getElementById('new-url').value = (document.getElementById('new-url').value + "-" + urlOfName);


    document.getElementById('link-generator').style.display = 'none';
    document.getElementById('new-url').style.display = 'block';

  }





</script>




